<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Onboarding Maturity Check</title>
    <style>
        /* CSS Isolation - Prevent global styles from affecting quiz */
        :root { all: initial; }
        html, body, div, span, h1, h2, h3, h4, h5, h6, p, button, input, textarea, select { all: revert; }
    </style>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #ffffff; color: #1e293b; line-height: 1.6; }
        .container { min-height: 100vh; width: 100%; background: #ffffff; position: relative; overflow: hidden; display: flex; flex-direction: column; }
        header { width: 100%; padding: 8px 32px; display: flex; justify-content: space-between; align-items: center; z-index: 50; position: relative; border-bottom: 1px solid #f1f5f9; }
        .header-title { font-weight: bold; font-size: 12px; letter-spacing: 0.2em; text-transform: uppercase; color: #1e3a8a; display: none; }
        .header-title.show { display: block; }
        main { flex: 1; display: flex; flex-direction: column; position: relative; z-index: 10; max-width: 1280px; margin: 0 auto; width: 100%; padding: 16px 32px; }
        .screen { opacity: 0; visibility: hidden; position: absolute; top: 0; left: 0; width: 100%; min-height: 100vh; transition: opacity 0.3s, visibility 0.3s; }
        .screen.active { opacity: 1; visibility: visible; position: relative; width: 100%; min-height: 100vh; top: auto; left: auto; }
        .start-screen { display: grid; grid-template-columns: 1fr 1fr; gap: 48px; align-items: center; padding: 60px 48px; }
        @media (max-width: 1024px) { .start-screen { grid-template-columns: 1fr; gap: 32px; } }
        .start-content { max-width: 600px; background: white; padding: 40px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .badge { display: inline-block; padding: 8px 16px; border-radius: 24px; background: #eff6ff; color: #2563eb; font-size: 12px; font-weight: bold; letter-spacing: 0.05em; text-transform: uppercase; margin-bottom: 24px; }
        h1 { font-size: clamp(32px, 8vw, 56px); font-weight: 900; letter-spacing: -0.02em; line-height: 0.95; margin-bottom: 24px; color: #0f172a; }
        .description { font-size: 18px; color: #1e293b; line-height: 1.8; margin-bottom: 32px; border-left: 4px solid #2563eb; padding-left: 24px; max-width: 500px; font-weight: 500; }
        .btn { display: inline-flex; align-items: center; gap: 12px; padding: 16px 40px; font-size: 16px; font-weight: 600; border: none; border-radius: 4px; cursor: pointer; transition: all 0.3s; text-decoration: none; color: white; background: #2563eb; box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.15); }
        .btn:hover { background: #1d4ed8; box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.2); }
        .graphic { position: relative; width: 100%; height: 500px; display: flex; align-items: center; justify-content: center; }
        @media (max-width: 1024px) { .graphic { display: none; } }
        .graphic-wrapper { position: relative; width: 450px; height: 450px; }
        .circle-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .power-icon-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 20; }
        .power-icon { width: 100px; height: 100px; background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 44px; box-shadow: 0 20px 25px -5px rgba(37, 99, 235, 0.3); }
        .stat-card { background: white; padding: 20px 24px; box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.08); z-index: 20; position: absolute; max-width: 220px; border-left: 4px solid #2563eb; border-radius: 4px; }
        .stat-card-1 { top: 40px; right: -40px; }
        .stat-card-2 { bottom: 40px; left: -40px; border-left-color: #1e40af; }
        .stat-card h3 { font-weight: bold; margin-bottom: 6px; font-size: 14px; color: #0f172a; }
        .stat-card p { font-size: 12px; color: #64748b; line-height: 1.5; }
        .stat-icon { font-size: 20px; margin-bottom: 8px; }
        .quiz-screen { display: grid; grid-template-columns: 1fr 1fr; gap: 48px; align-items: center; max-width: 1280px; margin: 0 auto; min-height: 100vh; }
        @media (max-width: 1024px) { .quiz-screen { grid-template-columns: 1fr; gap: 32px; } }
        .quiz-number { width: 48px; height: 48px; background: #dbeafe; color: #1e40af; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; border-radius: 50%; margin-bottom: 24px; }
        .quiz-question { font-size: 32px; font-weight: bold; line-height: 1.25; margin-bottom: 32px; color: #0f172a; }
        .quiz-category { text-transform: uppercase; letter-spacing: 0.05em; font-weight: bold; font-size: 12px; color: #64748b; }
        .quiz-divider { width: 24px; height: 4px; background: #2563eb; margin: 24px 0; border-radius: 2px; }
        .options { display: flex; flex-direction: column; gap: 16px; }
        .option { padding: 24px; background: #f0f4f8 !important; border: 2px solid #cbd5e1 !important; border-left: 4px solid #cbd5e1 !important; cursor: pointer; transition: all 0.2s; text-align: left; font-size: 16px; display: flex; justify-content: space-between; align-items: center; border-radius: 4px; color: #000000 !important; font-weight: 500; }
        .option span { color: #000000 !important; }
        .option * { color: #000000 !important; }
        .option:hover { background: #e0e7f1; border-color: #94a3b8; }
        .option.selected { background: #1e40af; color: white; border-color: #2563eb; }
        .option-check { width: 24px; height: 24px; background: #2563eb; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; flex-shrink: 0; }
        .quiz-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 64px; border-top: 1px solid #f1f5f9; padding-top: 32px; }
        .progress-dots { display: flex; gap: 4px; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: #e2e8f0; transition: background 0.2s; }
        .dot.active { background: #2563eb; }
        .nav-btn { background: none; border: none; cursor: pointer; font-size: 14px; font-weight: 500; display: flex; align-items: center; gap: 8px; transition: color 0.2s; color: #64748b; }
        .nav-btn:hover:not(:disabled) { color: #0f172a; }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .nav-btn.next { flex-direction: row-reverse; }
        .result-screen { display: flex; flex-direction: column; gap: 40px; padding: 40px 0; }
        .score-card { background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); color: white; padding: 40px; border-radius: 8px; }
        .score-header { margin-bottom: 32px; }
        .score-label { font-size: 12px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; opacity: 0.9; margin-bottom: 16px; }
        .score-circle { position: relative; width: 200px; height: 200px; margin: 0 auto 24px; }
        .score-glow { position: absolute; inset: -20px; background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%); border-radius: 50%; }
        .score-svg { width: 100%; height: 100%; transform: rotate(-90deg); }
        .score-bg-circle { fill: none; stroke: rgba(255,255,255,0.2); stroke-width: 8; }
        .score-progress-circle { fill: none; stroke: #93c5fd; stroke-width: 8; stroke-linecap: round; }
        .score-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
        .score-number { font-size: 48px; font-weight: bold; }
        .score-max { font-size: 12px; opacity: 0.8; }
        .result-title { font-size: 28px; font-weight: bold; margin-bottom: 16px; }
        .result-divider { width: 48px; height: 4px; background: #93c5fd; border-radius: 2px; }
        .score-card-footer { margin-top: 24px; }
        .result-description { font-size: 16px; line-height: 1.6; opacity: 0.95; }
        .insights { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }
        @media (max-width: 768px) { .insights { grid-template-columns: 1fr; } }
        .insights-card { background: white; padding: 32px; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .insights-title { font-size: 18px; font-weight: bold; margin-bottom: 24px; }
        .insights-icon { margin-right: 8px; }
        .bullets { display: flex; flex-direction: column; gap: 16px; }
        .bullet { padding-bottom: 16px; border-bottom: 1px solid #e2e8f0; }
        .bullet:last-child { border-bottom: none; padding-bottom: 0; }
        .bullet-label { font-weight: bold; font-size: 12px; text-transform: uppercase; color: #64748b; margin-bottom: 4px; }
        .bullet-text { font-size: 14px; color: #1e293b; line-height: 1.5; }
        .cta-card { position: relative; background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); color: white; padding: 32px; border-radius: 8px; overflow: hidden; }
        .cta-glow { position: absolute; top: -50%; right: -50%; width: 400px; height: 400px; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); border-radius: 50%; }
        .cta-content { position: relative; z-index: 2; display: flex; flex-direction: column; gap: 24px; }
        @media (min-width: 769px) { .cta-content { flex-direction: row; justify-content: space-between; align-items: center; } }
        .cta-text h4 { font-weight: bold; font-size: 18px; margin-bottom: 8px; }
        .cta-text p { font-size: 14px; color: #bfdbfe; line-height: 1.5; max-width: 280px; }
        .cta-buttons { display: flex; flex-direction: column; gap: 8px; }
        .btn-white { background: #2563eb; color: white; padding: 10px 24px; font-size: 14px; font-weight: 600; border: none; border-radius: 4px; cursor: pointer; transition: background 0.2s; text-decoration: none !important; display: inline-flex; }
        .btn-white:hover { background: #1d4ed8; text-decoration: none !important; }
        .btn-ghost { background: transparent; color: #93c5fd; border: none; cursor: pointer; font-size: 13px; font-weight: 600; padding: 8px 24px; transition: color 0.2s; display: flex; align-items: center; gap: 8px; }
        .btn-ghost:hover { color: white; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-title" id="headerTitle"></div>
        </header>
        <main>
            <div class="screen active" data-screen="start">
                <div class="start-screen">
                    <div class="start-content">
                        <div class="badge" id="badgeText">GRATIS VURDERING</div>
                        <h1 id="mainTitle">Onboarding Maturity Check</h1>
                        <p class="description" id="descriptionText">F√• et konkret billede af jeres HR-onboarding niveau</p>
                        <button class="btn" onclick="app.startQuiz()" id="startBtn">Start vurdering</button>
                    </div>
                    <div class="graphic">
                        <div class="graphic-wrapper">
                            <svg class="circle-svg" viewBox="0 0 450 450">
                                <circle cx="225" cy="225" r="200" fill="none" stroke="#f1f5f9" stroke-width="2"/>
                                <circle cx="225" cy="225" r="150" fill="none" stroke="#e2e8f0" stroke-width="2"/>
                                <circle cx="225" cy="225" r="100" fill="none" stroke="#cbd5e1" stroke-width="2"/>
                            </svg>
                            <div class="power-icon-container">
                                <div class="power-icon">
                                    <svg width="50" height="50" viewBox="0 0 100 100" fill="none">
                                        <path d="M50 20 Q50 20 50 40" stroke="white" stroke-width="3" stroke-linecap="round"/>
                                        <circle cx="50" cy="50" r="30" fill="none" stroke="white" stroke-width="3"/>
                                        <circle cx="50" cy="50" r="36" fill="none" stroke="white" stroke-width="1.5"/>
                                        <circle cx="50" cy="50" r="8" fill="white"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="stat-card stat-card-1">
                                <div class="stat-icon" id="stat1Emoji">üìä</div>
                                <h3 id="stat1Title">Datadrevet Indsigt</h3>
                                <p id="stat1Text">F√• konkrete tal p√• jeres HR-indsats.</p>
                            </div>
                            <div class="stat-card stat-card-2">
                                <div class="stat-icon" id="stat2Emoji">üë•</div>
                                <h3 id="stat2Title">Medarbejderrejse</h3>
                                <p id="stat2Text">Optim√©r oplevelsen fra dag 1.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="screen quiz-screen" data-screen="quiz">
                <div><div class="quiz-number" id="questionNumber">1</div><h2 class="quiz-question" id="questionText"></h2><div class="quiz-divider"></div><p class="quiz-category" id="categoryText"></p></div>
                <div class="options" id="optionsContainer"></div>
            </div>
            <div class="screen result-screen" data-screen="result">
                <div class="score-card">
                    <div class="score-header">
                        <div class="score-label">Onboarding Maturity Score</div>
                        <div class="score-circle"><div class="score-glow"></div><svg class="score-svg" viewBox="0 0 224 224"><circle class="score-bg-circle" cx="112" cy="112" r="100"></circle><circle class="score-progress-circle" cx="112" cy="112" r="100" id="progressCircle" style="stroke-dasharray: 628; stroke-dashoffset: 628;"></circle></svg><div class="score-text"><div class="score-number" id="scoreNumber">0</div><div class="score-max">af 30 point</div></div></div>
                        <h2 class="result-title" id="resultTitle"></h2><div class="result-divider"></div>
                    </div>
                    <div class="score-card-footer"><p class="result-description" id="resultDescription"></p></div>
                </div>
                <div class="insights">
                    <div class="insights-card">
                        <h3 class="insights-title"><span class="insights-icon">üìä</span>Analyse af jeres niveau</h3>
                        <div class="bullets" id="bulletsContainer"></div>
                    </div>
                    <div class="cta-card">
                        <div class="cta-glow"></div>
                        <div class="cta-content">
                            <div class="cta-text"><h4 id="ctaTitle">F√• styr p√• jeres onboarding</h4><p id="ctaDescription">Saml planer, opgaver og opf√∏lgning √©t sted med HR-ON Boarding.</p><div style="margin-top: 12px; font-size: 18px; font-weight: bold; color: #93c5fd;" id="ctaLogoText">HR-ON</div></div>
                            <div class="cta-buttons"><a href="https://hr-on.com/onboardingplatform/" target="_blank" class="btn-white" id="ctaLink" style="text-decoration: none; display: inline-flex;">L√¶s mere</a><button class="btn-ghost" onclick="app.reset()">‚Üª Start forfra</button></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="quiz-footer" id="quizFooter" style="display: none;">
                <button class="nav-btn" id="prevBtn" onclick="app.prevQuestion()">‚Üê Forrige sp√∏rgsm√•l</button>
                <div class="progress-dots" id="progressDots"></div>
                <button class="nav-btn next" id="nextBtn" onclick="app.nextQuestion()">N√¶ste trin ‚Üí</button>
            </div>
        </main>
    </div>
    <script>
        let quizConfig = {};
        
        async function loadQuizConfig() {
            try {
                const response = await fetch('/api/quiz-data');
                quizConfig = await response.json();
                initializeUI();
                app = new Quiz();
            } catch (error) {
                console.error('Error loading quiz config:', error);
            }
        }
        
        function initializeUI() {
            // General
            document.getElementById('badgeText').textContent = quizConfig.badge_text || 'GRATIS VURDERING';
            document.getElementById('mainTitle').textContent = quizConfig.header_title || 'Onboarding Maturity Check';
            document.getElementById('descriptionText').textContent = quizConfig.description_text || 'F√• et konkret billede af jeres HR-onboarding niveau';
            document.getElementById('startBtn').textContent = quizConfig.button_text || 'Start vurdering';
            document.getElementById('headerTitle').textContent = quizConfig.header_title || '';
            
            // Stat cards
            document.getElementById('stat1Emoji').textContent = quizConfig.stat1_emoji || 'üìä';
            document.getElementById('stat1Title').textContent = quizConfig.stat1_title || 'Datadrevet Indsigt';
            document.getElementById('stat1Text').textContent = quizConfig.stat1_text || 'F√• konkrete tal p√• jeres HR-indsats.';
            document.getElementById('stat2Emoji').textContent = quizConfig.stat2_emoji || 'üë•';
            document.getElementById('stat2Title').textContent = quizConfig.stat2_title || 'Medarbejderrejse';
            document.getElementById('stat2Text').textContent = quizConfig.stat2_text || 'Optim√©r oplevelsen fra dag 1.';
            
            // CTA
            document.getElementById('ctaTitle').textContent = quizConfig.cta_title || 'F√• styr p√• jeres onboarding';
            document.getElementById('ctaDescription').textContent = quizConfig.cta_description || 'Saml planer, opgaver og opf√∏lgning √©t sted med HR-ON Boarding.';
            document.getElementById('ctaLink').href = quizConfig.cta_link || 'https://hr-on.com/onboardingplatform/';
            document.getElementById('ctaLogoText').textContent = quizConfig.cta_logo_text || 'HR-ON';
        }
        
        class Quiz {
            constructor() {
                this.currentQuestion = 0;
                this.answers = {};
                this.init();
            }
            
            init() {
                this.setupProgressDots();
                this.updateQuestionDisplay();
            }
            
            startQuiz() {
                this.goToScreen('quiz');
                document.getElementById('quizFooter').style.display = 'flex';
            }
            
            goToScreen(screen) {
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.querySelector(`[data-screen="${screen}"]`).classList.add('active');
                document.querySelector('.header-title').classList.toggle('show', screen === 'quiz');
            }
            
            setupProgressDots() {
                const container = document.getElementById('progressDots');
                container.innerHTML = '';
                (quizConfig.questions || []).forEach((_, idx) => {
                    const dot = document.createElement('div');
                    dot.className = 'dot' + (idx === 0 ? ' active' : '');
                    container.appendChild(dot);
                });
            }
            
            updateQuestionDisplay() {
                const questions = quizConfig.questions || [];
                const q = questions[this.currentQuestion];
                const selected = this.answers[this.currentQuestion];
                
                document.getElementById('questionNumber').textContent = this.currentQuestion + 1;
                document.getElementById('questionText').textContent = q.text;
                document.getElementById('categoryText').textContent = q.category;
                
                const container = document.getElementById('optionsContainer');
                container.innerHTML = q.options.map((opt, idx) => 
                    `<button class="option ${selected === idx ? 'selected' : ''}" onclick="app.selectAnswer(${idx})"><span>${opt.text}</span>${selected === idx ? '<div class="option-check">‚úì</div>' : ''}</button>`
                ).join('');
                
                const dots = document.querySelectorAll('.dot');
                dots.forEach((dot, idx) => {
                    dot.classList.toggle('active', idx <= this.currentQuestion);
                });
                
                document.getElementById('prevBtn').disabled = this.currentQuestion === 0;
                document.getElementById('nextBtn').disabled = selected === undefined;
            }
            
            selectAnswer(idx) {
                this.answers[this.currentQuestion] = idx;
                this.updateQuestionDisplay();
            }
            
            nextQuestion() {
                if (this.currentQuestion < (quizConfig.questions || []).length - 1) {
                    this.currentQuestion++;
                    this.updateQuestionDisplay();
                } else {
                    this.showResults();
                }
            }
            
            prevQuestion() {
                if (this.currentQuestion > 0) {
                    this.currentQuestion--;
                    this.updateQuestionDisplay();
                }
            }
            
            showResults() {
                const questions = quizConfig.questions || [];
                let score = 0;
                for (let i = 0; i < questions.length; i++) {
                    const selectedIdx = this.answers[i];
                    if (selectedIdx !== undefined) {
                        score += questions[i].options[selectedIdx].points;
                    }
                }
                
                const results = quizConfig.results || [];
                const result = results.find(r => score >= r.min && score <= r.max) || results[0];
                
                document.getElementById('scoreNumber').textContent = score;
                document.getElementById('resultTitle').textContent = result.title;
                document.getElementById('resultDescription').textContent = result.description;
                
                const bulletsContainer = document.getElementById('bulletsContainer');
                bulletsContainer.innerHTML = (result.bullets || []).map(b => `
                    <div class="bullet">
                        <div class="bullet-label">${b.label}</div>
                        <div class="bullet-text">${b.text}</div>
                    </div>
                `).join('');
                
                const circumference = 2 * Math.PI * 100;
                const offset = circumference - (score / 30) * circumference;
                document.getElementById('progressCircle').style.strokeDashoffset = offset;
                
                this.goToScreen('result');
                document.getElementById('quizFooter').style.display = 'none';
            }
            
            reset() {
                this.currentQuestion = 0;
                this.answers = {};
                this.goToScreen('start');
                document.getElementById('quizFooter').style.display = 'none';
            }
        }
        
        let app;
        loadQuizConfig();
    </script>
</body>
</html>
